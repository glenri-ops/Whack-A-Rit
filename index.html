<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Whack-A-Rit</title>

<style>
html,body{
  margin:0;height:100%;background:#000;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  -webkit-tap-highlight-color:transparent;
  overscroll-behavior:none
}
body{touch-action:manipulation}
#app{position:relative;width:100%;height:100%;overflow:hidden}

#bg{position:absolute;inset:0;width:100%;height:100%;object-fit:cover}
#table{
  position:absolute;left:50%;top:56%;
  transform:translate(-50%,-50%);
  width:min(94vw,900px);
  opacity:0;transition:.25s
}

#hud{
  position:absolute;left:50%;top:8%;
  transform:translateX(-50%);
  background:#00c853;color:#fff;
  padding:14px 22px;border-radius:18px;
  font-size:26px;font-weight:900;
  display:none;z-index:10
}

#overlay{
  position:absolute;inset:0;
  display:flex;flex-direction:column;
  justify-content:center;align-items:center;
  gap:12px;background:rgba(0,0,0,.5);z-index:20
}
#play{
  background:#00c853;color:#fff;
  border:none;border-radius:18px;
  padding:18px 40px;font-size:22px;font-weight:900
}
#msg{color:#fff;font-weight:800}

/* ---------- LEVEL 40 ---------- */
#dark40{
  position:absolute;inset:0;
  background:#000;
  display:none;z-index:80;
  align-items:center;justify-content:center
}
#dark40 img{
  width:min(70vw,420px)
}

#emojiChaos{
  position:absolute;inset:0;
  display:none;z-index:90;
  background:rgba(0,0,0,.92);
}

.emoji{
  position:absolute;
  font-size:38px;
  cursor:pointer;
  user-select:none;
  animation: jitter 0.6s infinite alternate;
}

@keyframes jitter{
  from{transform:translate(-2px,-2px)}
  to{transform:translate(2px,2px)}
}
</style>
</head>

<body>
<div id="app">

<img id="bg" src="./bg.png">
<img id="table" src="./table.png">

<div id="hud">Score: <span id="score">0</span></div>

<div id="overlay">
  <button id="play">Play</button>
  <div id="msg">Hit Ritos for points. Avoid Tiga ğŸ˜ˆ</div>
</div>

<!-- LEVEL 40 DARK IMAGE -->
<div id="dark40">
  <img src="./level40.png">
</div>

<!-- EMOJI CHAOS -->
<div id="emojiChaos"></div>

</div>

<script>
(() => {

let score=0;
let running=false;
let inBonus=false;

const scoreEl=document.getElementById("score");
const hud=document.getElementById("hud");
const overlay=document.getElementById("overlay");
const table=document.getElementById("table");

const dark40=document.getElementById("dark40");
const emojiChaos=document.getElementById("emojiChaos");

function gameOver(){
  running=false;
  inBonus=false;
  dark40.style.display="none";
  emojiChaos.style.display="none";
  overlay.style.display="flex";
  table.style.opacity=0;
  hud.style.display="none";
}

function startLevel40(){
  inBonus=true;
  running=false;

  // PHASE 1 â€” DARK IMAGE
  dark40.style.display="flex";

  setTimeout(()=>{
    dark40.style.display="none";
    startEmojiChaos();
  },4000);
}

function startEmojiChaos(){
  emojiChaos.innerHTML="";
  emojiChaos.style.display="block";

  const emojis = ["ğŸ˜ˆ","ğŸ¤¡","ğŸ’€","ğŸ”¥","ğŸ•","ğŸ‘€","ğŸ§ ","ğŸ’£","ğŸ¸","ğŸ‘»","ğŸ˜µâ€ğŸ’«","ğŸ¦´","ğŸ§Ÿ","ğŸ¥´"];
  const dog = "ğŸ¶";

  const total = 90; // hilariously plenty

  // create many wrong emojis
  for(let i=0;i<total;i++){
    const e=document.createElement("div");
    e.className="emoji";
    e.textContent = emojis[Math.floor(Math.random()*emojis.length)];
    e.style.left=Math.random()*90+"%";
    e.style.top=Math.random()*90+"%";
    e.onclick=()=>gameOver();
    emojiChaos.appendChild(e);
  }

  // add ONE dog
  const dogEl=document.createElement("div");
  dogEl.className="emoji";
  dogEl.textContent=dog;
  dogEl.style.left=Math.random()*85+"%";
  dogEl.style.top=Math.random()*85+"%";
  dogEl.onclick=(e)=>{
    e.stopPropagation();
    score+=10;
    scoreEl.textContent=score;
    endEmojiChaos();
  };
  emojiChaos.appendChild(dogEl);

  // timeout = fail
  setTimeout(()=>gameOver(),5000);
}

function endEmojiChaos(){
  emojiChaos.style.display="none";
  inBonus=false;
  running=true;
}

document.getElementById("play").onclick=()=>{
  score=0;
  scoreEl.textContent=0;
  running=true;
  overlay.style.display="none";
  table.style.opacity=1;
  hud.style.display="block";

  // DEBUG trigger (remove later)
  // setTimeout(startLevel40,2000);
};

// simulate reaching 40 for now
document.addEventListener("keydown",e=>{
  if(e.key==="4"){
    score=40;
    scoreEl.textContent=40;
    startLevel40();
  }
});

})();
</script>
</body>
</html>
